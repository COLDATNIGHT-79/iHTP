{% extends "base.html" %}

{% block title %}Create Listing - iHateThisPerson{% endblock %}

{% block content %}
<div class="page-content">
    <div class="create-container">
        <!-- Left: Image Preview -->
        <div class="create-preview">
            <div class="preview-box" id="image-preview">
                <span class="preview-placeholder">image preview</span>
            </div>
            <p class="preview-hint">
                Paste any image URL - Instagram, Twitter, Imgur, etc.<br>
                We'll extract and display the image for you
            </p>
        </div>

        <!-- Right: Form -->
        <div class="create-form">
            <form action="/posts" method="post">
                <div class="form-group">
                    <input type="text" name="image_url" class="form-input"
                        placeholder="paste image URL (instagram, twitter, imgur, direct link...)" id="image-url-input"
                        oninput="previewUrl(this.value)">
                </div>

                <div class="form-group">
                    <input type="text" name="title" class="form-input" placeholder="title" maxlength="50" required>
                </div>

                <div class="form-group">
                    <textarea name="description" class="form-textarea" placeholder="description" maxlength="180"
                        rows="3"></textarea>
                </div>

                <div class="form-group">
                    <textarea name="reason" class="form-textarea" placeholder="reason for hate" maxlength="250"
                        rows="4"></textarea>
                </div>

                <div class="form-row">
                    <select name="tag1" class="form-select">
                        <option value="">tag 1</option>
                        <option value="politics">politics</option>
                        <option value="celebrity">celebrity</option>
                        <option value="sports">sports</option>
                        <option value="business">business</option>
                        <option value="tech">tech</option>
                        <option value="other">other</option>
                    </select>
                    <select name="tag2" class="form-select">
                        <option value="">tag 2</option>
                        <option value="politics">politics</option>
                        <option value="celebrity">celebrity</option>
                        <option value="sports">sports</option>
                        <option value="business">business</option>
                        <option value="tech">tech</option>
                        <option value="other">other</option>
                    </select>
                    <select name="nationality" class="form-select nationality-select">
                        <option value="">nationality</option>
                        <option value="US">ğŸ‡ºğŸ‡¸ United States</option>
                        <option value="GB">ğŸ‡¬ğŸ‡§ United Kingdom</option>
                        <option value="IN">ğŸ‡®ğŸ‡³ India</option>
                        <option value="CA">ğŸ‡¨ğŸ‡¦ Canada</option>
                        <option value="AU">ğŸ‡¦ğŸ‡º Australia</option>
                        <option value="DE">ğŸ‡©ğŸ‡ª Germany</option>
                        <option value="FR">ğŸ‡«ğŸ‡· France</option>
                        <option value="JP">ğŸ‡¯ğŸ‡µ Japan</option>
                        <option value="CN">ğŸ‡¨ğŸ‡³ China</option>
                        <option value="BR">ğŸ‡§ğŸ‡· Brazil</option>
                        <option value="MX">ğŸ‡²ğŸ‡½ Mexico</option>
                        <option value="RU">ğŸ‡·ğŸ‡º Russia</option>
                        <option value="KR">ğŸ‡°ğŸ‡· South Korea</option>
                        <option value="IT">ğŸ‡®ğŸ‡¹ Italy</option>
                        <option value="ES">ğŸ‡ªğŸ‡¸ Spain</option>
                    </select>
                </div>

                <button type="submit" class="btn-submit">Create Listing</button>
            </form>
        </div>
    </div>
</div>

<script>
    function previewUrl(url) {
        const preview = document.getElementById('image-preview');
        if (!url || !url.trim()) {
            preview.innerHTML = '<span class="preview-placeholder">image preview</span>';
            return;
        }
        // For preview, try direct URL (may not work for Instagram but that's ok)
        preview.innerHTML = '<img src="' + url + '" alt="Preview" onerror="this.outerHTML=\'<span class=preview-placeholder>Preview unavailable - will work after submit</span>\'">';
    }
</script>
{% endblock %}